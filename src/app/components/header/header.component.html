<div class="p-col-12 header p-nogutter">
    <div>
        <i (click)="showHideSidebar()" class="fas fa-bars header-icon sidebar-icon"></i>

        &nbsp;&nbsp;

        <span class="header-title">{{ headerTitle | translate}}</span>
    </div>

    &nbsp;&nbsp;

    <button pButton
            pRipple
            (click)="showFilter()"
            icon="fas fa-filter"
            label="{{'Filter' | translate}}"
            class="button-filter p-button-raised p-button-secondary">
    </button>

    <div class="header-filter">
        <p-calendar #dateFilter
                    (keypress)="onFilterFocus($event)"
                    (onClose)="onFilterClose()"
                    [(ngModel)]="dateInput"
                    [dateFormat]="dateField.dateFormat"
                    [firstDayOfWeek]="1"
                    [hideOnDateTimeSelect]="true"
                    [maxDate]="maxDate"
                    [monthNavigator]="false"
                    [name]="dateField.name"
                    [numberOfMonths]="dateField.numberOfMonths"
                    [readonlyInput]="false"
                    [selectionMode]="dateField.selectionMode"
                    [showButtonBar]="true"
                    [showIcon]="false"
                    [showOnFocus]="true"
                    [showTime]="dateField.showTime"
                    [yearNavigator]="true"
                    clearButtonStyleClass="hide-button"
                    todayButtonStyleClass="hide-button"
                    yearRange="1998:2100">
            <p-footer class="date-footer">
                <p-button (click)="onTodayClick()"
                          pRipple
                          label="{{ 'primeng.today' | translate }}"
                          styleClass="date-button date-button-today p-button-raised">
                </p-button>
                <p-button (click)="onFilterClick()"
                          pRipple
                          [disabled]="(dateInput && !dateInput[1] && dateInput[1] === null)"
                          label="{{ 'Filter' | translate}}"
                          styleClass="date-button button-right p-button-raised">
                </p-button>
            </p-footer>
        </p-calendar>
    </div>

    <div class="header-right">
        <p-dropdown (onChange)="languageChanged($event)"
                    [(ngModel)]="selectedLanguage"
                    [options]="languages"
                    [style]="{width: '75px'}"
                    optionLabel="label"
                    placeholder="{{ 'Select a language' | translate }}">
            <ng-template pTemplate="selectedItem">
                <div *ngIf="selectedLanguage" class="flag-container">
                    <img [class]="'flag flag-' + selectedLanguage.value" src="assets/img/flag_placeholder.png"/>
                </div>
            </ng-template>
            <ng-template let-language pTemplate="item">
                <div class="flag-container">
                    <img [class]="'flag flag-' + language.value" src="assets/img/flag_placeholder.png"/>
                    <div>{{language.label}}</div>
                </div>
            </ng-template>
        </p-dropdown>
        &nbsp;&nbsp;

        <ng-container *ngIf="hasLogin && !isAuthenticated; then login; else logout"></ng-container>

        <ng-template #login>
            <p-button (click)="onLoginClick()"
                      pRipple
                      icon="fa fa-sign-in-alt"
                      label="{{'Login' | translate}}"
                      styleClass="p-button-raised p-button-secondary">
            </p-button>
        </ng-template>

        <ng-template #logout>
            <div>{{loggedUserName }}</div>
            &nbsp;&nbsp;

            <div *ngIf="isAdministrator">
                <p-button
                    [icon]="showIcon"
                    pRipple
                    (onClick)="settingsInOut()">
                </p-button>
            </div>

            <p-button (click)="onLogoutClick()"
                      pRipple
                      icon="fa fa-sign-in-alt"
                      label="{{'Logout' | translate}}"
                      styleClass="p-button-raised p-button-secondary">
            </p-button>
        </ng-template>

    </div>

    <p-dialog
            [(visible)]="displayLogin"
            [baseZIndex]="1002"
            [draggable]="false"
            [modal]="true"
            [resizable]="false"
            [showHeader]="false"
            autoZIndex="false"
            baseZIndex="1001">
        <app-auth (closeLoginClicked)="onCloseLoginClick($event)"
                  [displayLogin]="displayLogin">
        </app-auth>

    </p-dialog>

    <div class="arrow arrow-position"
         pStyleClass="@parent"
         toggleClass="header-height">
        <i class="fas fa-sort-up"></i>
        <i class="fas fa-sort-down"></i>
    </div>
</div>
