
<p-toolbar>
    <div class="p-toolbar-group-left">
        <p-button icon="fas fa-arrow-left"
                  label="{{ 'goBack' | translate }}"
                  (click)="back()"
                  styleClass="p-button-raised">
        </p-button>
        &nbsp;&nbsp;
        <p-button (click)="onViewReportClicked('')"
                  pTooltip="{{ 'viewSynthesis' | translate }}"
                  styleClass="btn btn-icon p-button-raised view-report-icon icon-margin synthesis-link"
                  tooltipPosition="top">
            <span class="fas fa-file-invoice synthesis-icon"></span>
        </p-button>
        &nbsp;&nbsp;
        <p-button (click)="onViewReportClicked('deter')"
                  pTooltip="{{'viewDeterReport' | translate}}"
                  styleClass="btn btn-icon p-button-raised view-report-icon"
                  tooltipPosition="top">
            <img src="../../../../assets/img/ico/deter32x32.png"/>
        </p-button>
        <p-button (click)="onViewReportClicked('prodes')"
                  pTooltip="{{'viewProdesReport' | translate}}"
                  styleClass="btn btn-icon p-button-raised view-report-icon icon-margin"
                  tooltipPosition="top">
            <img src="../../../../assets/img/ico/prodes32x32.png"/>
        </p-button>
        <p-button (click)="onViewReportClicked('queimada')"
                  pTooltip="{{'viewBurnedReport' | translate}}"
                  styleClass="btn btn-icon p-button-raised view-report-icon icon-margin"
                  tooltipPosition="top">
            <img src="../../../../assets/img/ico/queima.ico"/>
        </p-button>
    </div>
    <p-button label="{{ 'conclusion' | translate }}" pTooltip="{{ 'alterConclusion' | translate }}" tooltipPosition="bottom" (click)="op.toggle($event)"></p-button>
    <div class="p-toolbar-group-right">
        <div *ngIf="loggedUser.administrator" class="report-buttons">
            <p-button (click)="generatePdf('open')"
                      [disabled]="!docBase64 || generatingReport"
                      icon="fas fa-download p-button-raised"
                      label="{{'generateReport' | translate}}">
            </p-button>
            <div class="vector-button">
                <p-inputSwitch [(ngModel)]="downloadVectors"
                               [disabled]="!docBase64 || generatingReport"
                               id="getVectors">
                </p-inputSwitch>
                <label for="getVectors">{{'downloadVectors' | translate}}</label>
            </div>
        </div>
    </div>
</p-toolbar>
<canvas height="400" id="imagem2" style="display: none" width="600"></canvas>
<canvas height="400" id="chartImg" style="display: none" width="600"></canvas>
<div *ngIf="!!docBase64">
    <ngx-extended-pdf-viewer
            [base64Src]="docBase64"
            [language]="'pt-BR'"
            [enablePrint]="false"
            [useBrowserLocale]="true"
            [enableDragAndDrop]="false"
            [textLayer]="true"
            [height]="'calc(100vh - 100px)'"
            [backgroundColor]="'#ccc'">
    </ngx-extended-pdf-viewer>
</div>

<div *ngIf="!docBase64" class="final-report-loading">
    <p-progressSpinner animationDuration="1s" strokeWidth="6"></p-progressSpinner>
</div>
<p-confirmDialog [baseZIndex]="10000" [style]="{width: '25vw'}"></p-confirmDialog>

<p-overlayPanel #op [dismissable]="true" [showCloseIcon]="false">
    <ng-template pTemplate>
        <div *ngIf="loggedUser.administrator">
            <p-scrollPanel [style]="{width: '100%', height: '350px'}">
                <br>
                <label>Sat: </label>
                <input [(ngModel)]="inputSat"
                       [disabled]="!docBase64 || generatingReport"
                       class="width-100"
                       pInputText
                       placeholder="Sat"
                       type="text">
                <br>
                <br>
                <label>{{ 'conclusion' | translate }}: </label>
                <textarea
                        [(ngModel)]="textAreaComments"
                        [cols]="30"
                        [disabled]="!docBase64 || generatingReport"
                        [rows]="10"
                        class="width-100"
                        autoResize="autoResize"
                        pInputTextarea>
                </textarea>
                <br>
            </p-scrollPanel>
        </div>
    </ng-template>
</p-overlayPanel>
